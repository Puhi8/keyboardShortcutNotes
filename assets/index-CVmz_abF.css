:root{--bg: #020617;--border-subtle: #1f2937;--border-strong: #4b5563;--accent: #3b82f6;--text-main: #f9fafb;--text-muted: #9ca3af;--key-base-size: 48px;--shadow-soft: 0 18px 45px rgba(0, 0, 0, .6);--gap: 6px;--transition-fast: .12s ease-out;--status-free-bg: #0c0f1b;--status-free-border: #3d394d;--status-used-bg: rgba(52, 211, 153, .18);--status-used-border: #34d399;--status-fixed-bg: rgba(248, 113, 113, .18);--status-fixed-border: #e74040;--status-other-bg: rgba(234, 179, 8, .18);--status-other-border: #eab308}*{box-sizing:border-box;margin:0;padding:0}body{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;background:radial-gradient(circle at top,#020617 0,#020617 40%,#020617);color:var(--text-main);min-height:100vh;display:flex;justify-content:center;align-items:stretch;padding:18px}.app{width:100%;max-width:1440px;background:radial-gradient(circle at top left,#020617 0,#020617 40%,#020617);border-radius:24px;box-shadow:var(--shadow-soft);border:1px solid rgba(148,163,184,.12);display:flex;flex-direction:column;overflow:hidden}.app-header{padding:16px 20px;border-bottom:1px solid rgba(55,65,81,.7);display:flex;align-items:flex-start;justify-content:space-between;gap:16px;background:linear-gradient(135deg,#3b82f626,#0f172ae6)}.title-group{display:flex;flex-direction:column;gap:4px;max-width:420px}.app-header h1{font-size:18px;letter-spacing:.04em;text-transform:uppercase;display:flex;align-items:center;gap:8px}.badge{font-size:11px;padding:2px 8px;border-radius:999px;background:#0f172ad9;border:1px solid rgba(148,163,184,.4);text-transform:none}.app-header p{font-size:12px;color:var(--text-muted)}.header-right{display:flex;flex-direction:column;gap:8px;align-items:flex-end}.profile-bar{display:flex;gap:6px;align-items:center}.profile-label{font-size:11px;text-transform:uppercase;letter-spacing:.08em;color:var(--text-muted)}.profile-select{border-radius:999px;border:1px solid var(--border-strong);background:#0f172ae6;color:var(--text-main);padding:4px 10px;font-size:12px;outline:none}.profile-select:focus{border-color:#3b82f6e6;box-shadow:0 0 0 1px #3b82f680}.toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:flex-end}.btn{border:none;cursor:pointer;border-radius:999px;font-size:13px;padding:6px 12px;background:#0f172ae6;color:var(--text-main);border:1px solid rgba(55,65,81,.8);display:inline-flex;align-items:center;gap:6px;transition:background var(--transition-fast),border-color var(--transition-fast),transform var(--transition-fast)}.btn:hover{background:#1e40afb3;border-color:#818cf8e6;transform:translateY(-1px)}.btn.primary{background:linear-gradient(135deg,#3b82f6,#22c55e);border-color:transparent;box-shadow:0 10px 24px #38bdf859}.btn.primary:hover{filter:brightness(1.08)}.btn-ghost{background:transparent;border-color:#4b5563e6;font-size:12px;padding:4px 10px}.btn-ghost:hover{background:#0f172ae6}.file-input{display:none}.main{display:flex;flex-direction:column;padding:10px 16px 16px;gap:10px;height:100%}.layer-bar{display:flex;gap:8px;align-items:center;margin-bottom:6px}.layer-label{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:var(--text-muted)}.layer-tabs{display:flex;gap:6px;background:#0f172ad9;padding:4px;border-radius:999px;border:1px solid rgba(55,65,81,.9)}.layer-tabs.compact{padding:4px 6px}.layer-tab{padding:4px 10px;font-size:12px;background:transparent;border-radius:999px;color:var(--text-muted);border:none;cursor:pointer;transition:background var(--transition-fast),color var(--transition-fast),transform var(--transition-fast)}.layer-tab-active{background:#2563ebf2;color:#fff;transform:translateY(-1px);box-shadow:0 8px 18px #2563eb80}.layer-hint{margin-left:auto;font-size:11px;color:var(--text-muted);opacity:.9}.content{display:grid;grid-template-columns:minmax(0,1fr);grid-template-rows:auto auto;gap:12px;min-height:360px}.keyboard-wrap{background:radial-gradient(circle at top,#020617 0,#020617 55%,#020617);padding:12px 12px 14px;border-radius:20px;border:1px solid var(--border-subtle);position:relative;overflow-x:auto;width:100%}.keyboard-top-strip{display:flex;justify-content:space-between;align-items:center;font-size:11px;color:var(--text-muted);margin-bottom:6px;opacity:.9}.traffic-light{display:inline-flex;gap:4px;align-items:center}.traffic-light .dot{width:8px;height:8px;border-radius:999px}.traffic-light .dot.red{background:#ef4444}.traffic-light .dot.yellow{background:#eab308}.traffic-light .dot.green{background:#22c55e}.keyboard{display:flex;flex-direction:column;gap:var(--gap);min-width:0;width:100%}.kb-row{display:flex;gap:var(--gap)}.kb-spacer{flex:0 0 12px}.kb-empty{flex:0 0 auto;height:var(--key-base-size);border-radius:10px;background:transparent;border:none;pointer-events:none;opacity:0}.kb-key{position:relative;flex:0 0 auto;height:var(--key-base-size);border-radius:10px;background:var(--status-free-bg);border:1px solid var(--status-free-border);display:flex;flex-direction:column;padding:4px 6px;justify-content:space-between;cursor:pointer;transition:background var(--transition-fast),border-color var(--transition-fast),transform var(--transition-fast),box-shadow var(--transition-fast);overflow:hidden}.kb-key.merge-left{margin-left:calc(var(--gap) * -1);border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.kb-key.merge-right{border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.kb-key.merge-top{margin-top:calc(var(--gap) * -1);height:calc(var(--key-base-size) + var(--gap));border-top:none;border-top-left-radius:0;border-top-right-radius:0}.kb-key.merge-bottom{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.kb-key:hover{transform:translateY(-1px);box-shadow:0 10px 20px #0f172ab3;border-color:#94a3b8e6}.kb-key-label{font-size:11px;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted)}.kb-key-main{font-size:12px;font-weight:500;color:var(--text-main);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.kb-key-note{font-size:10px;color:var(--text-muted);white-space:nowrap;text-overflow:ellipsis;overflow:hidden;opacity:.9}.kb-key-status-dot{position:absolute;width:6px;height:6px;border-radius:999px;right:6px;top:6px;opacity:.85}.kb-key[data-status=free]{background:var(--status-free-bg);border-color:var(--status-free-border)}.kb-key[data-status=free] .kb-key-status-dot{background:var(--status-free-border)}.kb-key[data-status=used]{background:var(--status-used-bg);border-color:var(--status-used-border)}.kb-key[data-status=used] .kb-key-status-dot{background:var(--status-used-border)}.kb-key[data-status=fixed]{background:var(--status-fixed-bg);border-color:var(--status-fixed-border)}.kb-key[data-status=fixed] .kb-key-status-dot,.kb-key[data-status=important] .kb-key-status-dot{background:var(--status-fixed-border)}.kb-key[data-status=other]{background:var(--status-other-bg);border-color:var(--status-other-border)}.kb-key[data-status=other] .kb-key-status-dot{background:var(--status-other-border)}.w1{width:calc(var(--key-base-size) * 1)}.w1_{width:calc(var(--key-base-size) * 1 + var(--gap))}.w1_25{width:calc(var(--key-base-size) * 1.25)}.w1_25_{width:calc(var(--key-base-size) * 1.25 + var(--gap))}.w1_5_{width:calc(var(--key-base-size) * 1.5 + var(--gap))}.w1_5{width:calc(var(--key-base-size) * 1.5)}.w1_75_{width:calc(var(--key-base-size) * 1.75 + var(--gap))}.w2_{width:calc(var(--key-base-size) * 2 + var(--gap))}.w2_25_{width:calc(var(--key-base-size) * 2.25 + var(--gap))}.w2_75_{width:calc(var(--key-base-size) * 2.75 + var(--gap))}.w3{width:calc(var(--key-base-size) * 3)}.w3_{width:calc(var(--key-base-size) * 3 + var(--gap))}.w6_{width:calc(var(--key-base-size) * 6 + var(--gap))}.editor{background:radial-gradient(circle at top,#020617 0,#020617 70%,#020617);border-radius:18px;border:1px solid var(--border-subtle);padding:12px 12px 14px;display:flex;flex-direction:column;gap:10px;width:100%}.editor-header{display:flex;justify-content:space-between;align-items:flex-start;gap:8px}.editor-title-main{font-size:14px;font-weight:600;display:flex;gap:6px;align-items:baseline}.key-code{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.08em}.editor-subtitle{font-size:11px;color:var(--text-muted);margin-top:2px}.editor-body{display:flex;flex-direction:column;gap:10px;margin-top:4px}.field-row{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}.field{display:flex;flex-direction:column;gap:4px}.field label{font-size:11px;text-transform:uppercase;letter-spacing:.08em;color:var(--text-muted)}.field small{font-size:10px;color:var(--text-muted)}input[type=text],textarea{border-radius:10px;border:1px solid var(--border-strong);background:#0f172ae6;color:var(--text-main);padding:6px 8px;font-size:13px;font-family:inherit;resize:vertical;min-height:30px;outline:none;transition:border-color var(--transition-fast),box-shadow var(--transition-fast),background var(--transition-fast)}textarea{min-height:80px}input:focus,textarea:focus{border-color:#3b82f6e6;box-shadow:0 0 0 1px #3b82f680;background:#0f172a}.status-badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:3px}.status-chip{font-size:11px;border-radius:999px;padding:3px 8px;border:1px solid rgba(75,85,99,.9);background:#0f172af2;color:var(--text-main);cursor:pointer;display:inline-flex;align-items:center;gap:4px}.status-chip .dot{width:8px;height:8px;border-radius:999px}.status-chip .dot[data-status-dot=free]{background:var(--status-free-border)}.status-chip .dot[data-status-dot=used]{background:var(--status-used-border)}.status-chip .dot[data-status-dot=fixed],.status-chip .dot[data-status-dot=important]{background:var(--status-fixed-border)}.status-chip .dot[data-status-dot=other]{background:var(--status-other-border)}.status-chip-active{border-color:#818cf8e6;box-shadow:0 0 0 1px #818cf8b3}.pill{font-size:10px;padding:2px 7px;border-radius:999px;border:1px solid rgba(75,85,99,.9);background:#0f172af2;display:inline-flex;align-items:center;gap:6px}.pill .pill-item{display:inline-flex;align-items:center;gap:6px}.pill .dot{width:7px;height:7px;border-radius:999px}.pill .dot[data-status-dot=free]{background:var(--status-free-border)}.pill .dot[data-status-dot=used]{background:var(--status-used-border)}.pill .dot[data-status-dot=fixed],.pill .dot[data-status-dot=important]{background:var(--status-fixed-border)}.pill .dot[data-status-dot=other]{background:var(--status-other-border)}.clearKey-button{margin-left:auto}@media (max-width: 1024px){.app-header{flex-direction:column;align-items:flex-start}.header-right{align-items:flex-start}}@media (max-width: 768px){body{padding:8px}.layer-bar{flex-wrap:wrap}}.layer-preview{--key-base-size: 12px;--gap: 2px;background:radial-gradient(circle at top,#020617 0,#020617 70%,#020617);border-radius:18px;border:1px solid var(--border-subtle);padding:12px;display:flex;flex-direction:column;gap:10px}.layer-preview-title{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:var(--text-muted)}.layer-preview-grid{display:flex;flex-wrap:wrap;gap:10px}.mini-layer{border:1px solid var(--border-subtle);border-radius:12px;padding:8px;background:#0f172a99;display:flex;flex-direction:column;gap:6px;min-width:fit-content;width:fit-content}.mini-layer-header{font-size:12px;font-weight:600;color:var(--text-main)}.mini-keyboard{display:flex;flex-direction:column;gap:2px;overflow-x:auto;width:fit-content}.mini-row{display:flex;gap:2px;flex-wrap:nowrap;width:fit-content}.mini-key{flex:0 0 auto;height:12px;border:1px solid var(--border-subtle);border-radius:3px;background:var(--status-free-bg);border-color:var(--status-free-border)}.mini-empty{flex:0 0 auto;height:12px;opacity:0}.mini-spacer{flex:0 0 3px}.mini-key[data-status=free]{background:var(--status-free-bg);border-color:var(--status-free-border)}.mini-key[data-status=used]{background:var(--status-used-bg);border-color:var(--status-used-border)}.mini-key[data-status=fixed],.mini-key[data-status=important]{background:var(--status-fixed-bg);border-color:var(--status-fixed-border)}.mini-key[data-status=other]{background:var(--status-other-bg);border-color:var(--status-other-border)}.mini-key.merge-left{margin-left:calc(var(--gap) * -1);border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.mini-key.merge-right{border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.mini-key.merge-top{margin-top:calc(var(--gap) * -1);height:calc(var(--key-base-size) + var(--gap));border-top:none;border-top-left-radius:0;border-top-right-radius:0}.mini-key.merge-bottom{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}
